#!/bin/sh
JSON_STRING='window.configs = { \
  "VITE_LOGIN_OIDC":"'"${VITE_LOGIN_OIDC}"'", \
  "VITE_LOGIN_SIMPLE":"'"${VITE_LOGIN_SIMPLE}"'", \
  "VITE_KEYCLOAK_REALM_URI":"'"${VITE_KEYCLOAK_REALM_URI}"'", \
  "VITE_KEYCLOAK_CLIENT_ID":"'"${VITE_KEYCLOAK_CLIENT_ID}"'", \
  "VITE_KEYCLOAK_REDIRECT_URI":"'"${VITE_KEYCLOAK_REDIRECT_URI}"'", \
  "VITE_KEYCLOAK_POST_LOGOUT_REDIRECT_URI":"'"${VITE_KEYCLOAK_POST_LOGOUT_REDIRECT_URI}"'", \
  "VITE_KEYCLOAK_RESPONSE_TYPE":"'"${VITE_KEYCLOAK_RESPONSE_TYPE}"'", \
  "VITE_KEYCLOAK_SCOPE":"'"${VITE_KEYCLOAK_SCOPE}"'", \
  "VITE_DEV_MODE":"'"${VITE_DEV_MODE}"'", \
  "VITE_URL_PREFIX":"'"${VITE_URL_PREFIX}"'", \
  "VITE_SERVER_ADDRESS":"'"${VITE_SERVER_ADDRESS}"'", \
  "VITE_CURRENT_COMMIT_VERSION":"'"${VITE_CURRENT_COMMIT_VERSION}"'" \
}'
sed -i "s@// CONFIGURATIONS_PLACEHOLDER@${JSON_STRING}@" /usr/share/nginx/html/index.html
exec "$@"
